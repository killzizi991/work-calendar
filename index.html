<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–¥–∞–∂</title>
    <meta name="theme-color" content="#4e73df">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è -->
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–¥–∞–∂">
</head>
<body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="app-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</div>
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="header">
        <button id="prev-month">&lt;</button>
        <button id="month-year-selector" class="month-selector">
            <h2 id="current-month-year">–û–∫—Ç—è–±—Ä—å 2023</h2>
        </button>
        <button id="next-month">&gt;</button>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–∞–ª–∏—Ç—Ä—ã -->
        <button id="palette-btn" class="palette-btn">üé®</button>
        
        <button id="summary-btn">–†–∞—Å—á–µ—Ç—ã</button>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–∞–ª–∏—Ç—Ä—ã -->
    <div id="palette-panel" class="palette-panel">
        <div class="palette-tools">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ -->
            <div class="palette-tool fill" data-color="#ffffff" style="background-color: #ffffff"></div>
            <div class="palette-tool fill" data-color="#ffcccc" style="background-color: #ffcccc"></div>
            <div class="palette-tool fill" data-color="#ccffcc" style="background-color: #ccffcc"></div>
            <div class="palette-tool fill" data-color="#ccccff" style="background-color: #ccccff"></div>
            
            <!-- –ù–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ -->
            <div class="palette-tool fill" data-color="#FFA500" style="background-color: #FFA500"></div>
            <div class="palette-tool fill" data-color="#40E0D0" style="background-color: #40E0D0"></div>
            <div class="palette-tool fill" data-color="#ADFF2F" style="background-color: #ADFF2F"></div>
            
            <!-- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±–≤–æ–¥–∫–∏ -->
            <div id="palette-border" class="palette-tool" title="–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–±–≤–æ–¥–∫–∞">üî≤</div>
        </div>
    </div>
    
    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <div id="calendar" class="calendar"></div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–Ω—è -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–î–µ–Ω—å <span id="modal-day"></span></h3>
            <input type="number" id="sales-input" placeholder="–°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂">
            <textarea id="comment-input" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
            <div class="color-picker">
                <div class="color-option" style="background-color: #ffffff;" data-color="#ffffff"></div>
                <div class="color-option" style="background-color: #ffcccc;" data-color="#ffcccc"></div>
                <div class="color-option" style="background-color: #ccffcc;" data-color="#ccffcc"></div>
                <div class="color-option" style="background-color: #ccccff;" data-color="#ccccff"></div>
                <!-- –ù–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ -->
                <div class="color-option" style="background-color: #FFA500;" data-color="#FFA500"></div>
                <div class="color-option" style="background-color: #40E0D0;" data-color="#40E0D0"></div>
                <div class="color-option" style="background-color: #ADFF2F;" data-color="#ADFF2F"></div>
            </div>
            <button id="save-data">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∞—Å—á–µ—Ç–æ–≤ -->
    <div id="summary-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–†–∞—Å—á–µ—Ç—ã –∑–∞ <span id="summary-month-year">–û–∫—Ç—è–±—Ä—å 2023</span></h3>
            <div class="summary-results">
                <p>–†–∞–±–æ—á–∏—Ö –¥–Ω–µ–π: <span id="modal-work-days">0</span></p>
                <p>–°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂: <span id="modal-total-sales">0</span> —Ä—É–±</p>
                <p>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="modal-total-earned">0</span> —Ä—É–±</p>
                <p>–ó–∞—Ä–ø–ª–∞—Ç–∞: <span id="modal-salary">0</span> —Ä—É–±</p>
                <p>–û—Å—Ç–∞—Ç–æ–∫: <span id="modal-balance">0</span> —Ä—É–±</p>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ -->
    <div id="period-modal" class="modal">
        <div class="modal-content period-selector">
            <span class="close">&times;</span>
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</h3>
            
            <div class="period-step" id="year-step">
                <h4>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–¥</h4>
                <div class="period-options" id="year-options"></div>
            </div>
            
            <div class="period-step" id="month-step" style="display:none">
                <h4>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</h4>
                <div class="period-options" id="month-options"></div>
            </div>
            
            <button id="period-back" style="display:none">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // –°–∫—Ä—ã—Ç–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        window.addEventListener('load', () => {
            document.getElementById('app-loading').style.display = 'none';
            
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω', reg))
                    .catch(err => console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker', err));
            }
        });
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            const installButton = document.createElement('button');
            installButton.textContent = '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ';
            installButton.style.position = 'fixed';
            installButton.style.bottom = '20px';
            installButton.style.left = '50%';
            installButton.style.transform = 'translateX(-50%)';
            installButton.style.zIndex = '10000';
            installButton.style.padding = '10px 20px';
            installButton.style.backgroundColor = '#4e73df';
            installButton.style.color = 'white';
            installButton.style.border = 'none';
            installButton.style.borderRadius = '5px';
            installButton.style.cursor = 'pointer';
            installButton.style.boxShadow = '0 3px 10px rgba(0,0,0,0.2)';
            
            installButton.addEventListener('click', () => {
                e.prompt();
                installButton.style.display = 'none';
            });
            
            document.body.appendChild(installButton);
            
            setTimeout(() => {
                installButton.style.display = 'none';
            }, 10000);
        });
    </script>
</body>
</html>
